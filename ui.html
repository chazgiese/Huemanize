<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body {
      font-family: Inter, sans-serif;
      margin: 0;
      padding: 20px;
      background: #ffffff;
    }
    
    .container {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    
    h2 {
      margin: 0 0 16px 0;
      font-size: 16px;
      font-weight: 600;
      color: #333;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    label {
      font-size: 12px;
      font-weight: 500;
      color: #333;
    }
    
    input, select {
      padding: 8px 12px;
      border: 1px solid #e1e5e9;
      border-radius: 6px;
      font-size: 14px;
      background: #ffffff;
    }
    
    input:focus, select:focus {
      outline: none;
      border-color: #18a0fb;
      box-shadow: 0 0 0 2px rgba(24, 160, 251, 0.1);
    }
    
    .color-picker-container {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .color-picker {
      width: 40px;
      height: 40px;
      border: 2px solid #e1e5e9;
      border-radius: 6px;
      cursor: pointer;
      background: #ff6b35;
    }
    
    .color-preview {
      flex: 1;
      padding: 8px 12px;
      background: #f8f9fa;
      border-radius: 6px;
      font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
      font-size: 12px;
      color: #666;
    }
    
    .preview-container {
      margin-top: 16px;
      padding: 16px;
      background: #f8f9fa;
      border-radius: 8px;
      border: 1px solid #e1e5e9;
    }
    
    .color-scale {
      display: flex;
      gap: 4px;
      margin-top: 12px;
    }
    
    .color-swatch {
      flex: 1;
      height: 40px;
      border-radius: 4px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: transform 0.1s;
    }
    
    .color-swatch:hover {
      transform: scale(1.05);
    }
    
    .color-info {
      display: flex;
      justify-content: space-between;
      font-size: 10px;
      color: #666;
      margin-top: 4px;
    }
    
    button {
      background: #18a0fb;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 12px 16px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    button:hover {
      background: #0d8ce0;
    }
    
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    
    .error {
      color: #e74c3c;
      font-size: 12px;
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Huemanize</h2>
    <p>Generate beautiful color scales for your design system</p>
    
    <div class="form-group">
      <label for="baseColor">Base Color</label>
      <div class="color-picker-container">
        <input type="color" id="baseColor" class="color-picker" value="#ff6b35">
        <div class="color-preview" id="colorPreview">#ff6b35</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="scaleType">Scale Type</label>
      <select id="scaleType">
        <option value="linear">Linear</option>
        <option value="exponential">Exponential</option>
        <option value="logarithmic">Logarithmic</option>
        <option value="sine">Sine Wave</option>
      </select>
    </div>
    
    <div class="form-group">
      <label for="numShades">Number of Shades</label>
      <input type="number" id="numShades" min="3" max="20" value="9">
    </div>
    
    <div class="form-group">
      <label for="direction">Direction</label>
      <select id="direction">
        <option value="both">Light to Dark</option>
        <option value="light">Light Only</option>
        <option value="dark">Dark Only</option>
      </select>
    </div>
    
    <div class="preview-container">
      <label>Preview</label>
      <div class="color-scale" id="colorScale"></div>
      <div class="color-info" id="colorInfo"></div>
    </div>
    
    <button id="generate">Generate Color Scale</button>
  </div>
  
  <script>
    // Color utilities
    function hexToRgb(hex) {
      const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? {
        r: parseInt(result[1], 16) / 255,
        g: parseInt(result[2], 16) / 255,
        b: parseInt(result[3], 16) / 255
      } : null;
    }
    
    function rgbToHex(r, g, b) {
      return "#" + ((1 << 24) + (Math.round(r * 255) << 16) + (Math.round(g * 255) << 8) + Math.round(b * 255)).toString(16).slice(1);
    }
    
    function interpolateColor(color1, color2, factor) {
      return {
        r: color1.r + (color2.r - color1.r) * factor,
        g: color1.g + (color2.g - color1.g) * factor,
        b: color1.b + (color2.b - color1.b) * factor
      };
    }
    
    function generateColorScale(baseColor, scaleType, numShades, direction) {
      const colors = [];
      const baseRgb = hexToRgb(baseColor);
      
      if (!baseRgb) return [];
      
      let steps = [];
      
      // Generate step values based on scale type
      switch (scaleType) {
        case 'linear':
          steps = Array.from({length: numShades}, (_, i) => i / (numShades - 1));
          break;
        case 'exponential':
          steps = Array.from({length: numShades}, (_, i) => Math.pow(i / (numShades - 1), 2));
          break;
        case 'logarithmic':
          steps = Array.from({length: numShades}, (_, i) => Math.log(1 + i) / Math.log(numShades));
          break;
        case 'sine':
          steps = Array.from({length: numShades}, (_, i) => (Math.sin(i / (numShades - 1) * Math.PI) + 1) / 2);
          break;
      }
      
      // Adjust steps based on direction
      if (direction === 'light') {
        steps = steps.map(s => 1 - s);
      } else if (direction === 'dark') {
        steps = steps.map(s => s);
      } else {
        // both - create light to dark scale
        const lightSteps = steps.slice().reverse();
        const darkSteps = steps;
        steps = [...lightSteps, ...darkSteps.slice(1)];
      }
      
      // Generate colors
      for (let i = 0; i < steps.length; i++) {
        const factor = steps[i];
        const color = {
          r: baseRgb.r * (1 - factor) + factor,
          g: baseRgb.g * (1 - factor) + factor,
          b: baseRgb.b * (1 - factor) + factor
        };
        colors.push(color);
      }
      
      return colors;
    }
    
    function updatePreview() {
      const baseColor = document.getElementById('baseColor').value;
      const scaleType = document.getElementById('scaleType').value;
      const numShades = parseInt(document.getElementById('numShades').value);
      const direction = document.getElementById('direction').value;
      
      document.getElementById('colorPreview').textContent = baseColor;
      
      const colors = generateColorScale(baseColor, scaleType, numShades, direction);
      const colorScale = document.getElementById('colorScale');
      const colorInfo = document.getElementById('colorInfo');
      
      colorScale.innerHTML = '';
      colorInfo.innerHTML = '';
      
      colors.forEach((color, index) => {
        const swatch = document.createElement('div');
        swatch.className = 'color-swatch';
        swatch.style.backgroundColor = rgbToHex(color.r, color.g, color.b);
        swatch.title = rgbToHex(color.r, color.g, color.b);
        
        const info = document.createElement('div');
        info.textContent = `${index + 1}`;
        info.style.textAlign = 'center';
        
        colorScale.appendChild(swatch);
        colorInfo.appendChild(info);
      });
    }
    
    // Event listeners
    document.getElementById('baseColor').addEventListener('input', updatePreview);
    document.getElementById('scaleType').addEventListener('change', updatePreview);
    document.getElementById('numShades').addEventListener('input', updatePreview);
    document.getElementById('direction').addEventListener('change', updatePreview);
    
    document.getElementById('generate').addEventListener('click', () => {
      const baseColor = document.getElementById('baseColor').value;
      const scaleType = document.getElementById('scaleType').value;
      const numShades = parseInt(document.getElementById('numShades').value);
      const direction = document.getElementById('direction').value;
      
      const colors = generateColorScale(baseColor, scaleType, numShades, direction);
      
      parent.postMessage({ 
        pluginMessage: { 
          type: 'generate-color-scale',
          colors: colors,
          baseColor: baseColor,
          scaleType: scaleType,
          numShades: numShades,
          direction: direction
        } 
      }, '*');
    });
    
    // Initialize preview
    updatePreview();
  </script>
</body>
</html> 